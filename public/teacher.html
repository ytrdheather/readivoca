<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readitude Teacher - ê´€ë¦¬ì ëª¨ë“œ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        .tab-menu { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
        .tab-btn { background: none; border: none; padding: 10px 20px; font-size: 1.1rem; cursor: pointer; color: #777; font-weight: bold; }
        .tab-btn.active { color: #32bfb6; border-bottom: 3px solid #32bfb6; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .print-options { background: #f8f9fa; padding: 20px; border-radius: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .print-group { margin-bottom: 15px; }
        .print-group label { display: block; font-weight: bold; margin-bottom: 5px; color: #555; }
        .print-group input { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
        .range-wrap { display: flex; align-items: center; gap: 10px; margin-bottom: 5px; }
        
        .bulk-text-area { width: 100%; height: 150px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-family: monospace; font-size: 0.9rem; margin-bottom: 10px; resize: vertical; }
        #request-queue-box { background: #fff3e0; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #ff9800; display: none; }
        .req-card { background: white; padding: 10px 15px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ddd; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container" style="max-width: 900px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 style="color:#32bfb6; margin:0;">ğŸ‘¨â€ğŸ« Readitude Teacher</h2>
            <button class="btn-secondary" onclick="logout()" style="margin:0; padding:5px 10px; font-size:0.9rem;">ë¡œê·¸ì•„ì›ƒ</button>
        </div>

        <div class="tab-menu">
            <button class="tab-btn active" onclick="switchTab('tab-1', this)">1. í•™ìƒ ê´€ë¦¬</button>
            <button class="tab-btn" onclick="switchTab('tab-2', this)">2. í•™ìŠµ í˜„í™©</button>
            <button class="tab-btn" onclick="switchTab('tab-3', this)">3. ë‹¨ì–´ ê´€ë¦¬</button>
            <button class="tab-btn" onclick="switchTab('tab-4', this)">4. ì¸ì‡„ ì„¼í„°</button>
        </div>

        <!-- 1. í•™ìƒ ê´€ë¦¬ -->
        <div id="tab-1" class="tab-content active">
            <h3>ğŸ‘¥ í•™ìƒ ê´€ë¦¬ ë° êµì¬ ë°°ì •</h3>
            <table class="teacher-table">
                <thead><tr><th>ì•„ì´ë””</th><th>ì´ë¦„</th><th>ë°°ì •ëœ êµì¬</th><th>ê´€ë¦¬</th></tr></thead>
                <tbody id="student-list-body"></tbody>
            </table>
        </div>

        <!-- 2. í•™ìŠµ í˜„í™© -->
        <div id="tab-2" class="tab-content">
            <div id="request-queue-box">
                <h4 style="color:#e65100; margin-top:0;">ğŸš€ ì‹¤ì‹œê°„ ì‹œí—˜ ìŠ¹ì¸ ëŒ€ê¸°ì¤‘...</h4>
                <div id="request-list"></div>
            </div>
            <h3>ğŸ“Š ì‹¤ì‹œê°„ í•™ìŠµ í˜„í™©</h3>
            <div style="display:flex; gap:10px; margin-bottom:15px;">
                <input type="date" id="dash-date" style="width:auto;">
                <button class="btn-primary" style="width:auto; margin:0;" onclick="loadDashboard()">ì¡°íšŒ</button>
            </div>
            <table class="teacher-table">
                <thead><tr><th>ì‹œê°„</th><th>í•™ìƒ</th><th>ë‚´ìš©</th><th>í™œë™</th><th>ê²°ê³¼</th><th>ì˜¤ë‹µ</th></tr></thead>
                <tbody id="dashboard-body"></tbody>
            </table>
        </div>

        <!-- 3. ë‹¨ì–´ ê´€ë¦¬ -->
        <div id="tab-3" class="tab-content">
            <h3>ğŸ› ï¸ ë‹¨ì–´ ë°ì´í„° ê´€ë¦¬ì†Œ</h3>
            
            <div style="background:#fff3e0; padding:20px; border-radius:10px; margin-bottom:20px; border: 1px solid #ffe0b2;">
                <h4 style="color:#e65100; margin-top:0;">ğŸ“ ê°„í¸ í…ìŠ¤íŠ¸ ì—…ë¡œë“œ (ë³µì‚¬/ë¶™ì—¬ë„£ê¸°)</h4>
                <div class="upload-guide">ìˆœì„œ: <code>ì˜ì–´</code> | <code>ëœ»</code> | <code>ë°˜ì˜ì–´</code> | <code>ìœ ì˜ì–´</code> | <code>ì˜ˆë¬¸</code></div>
                <div style="display:flex; gap:10px; margin-bottom:10px;">
                    <input type="text" id="manual-book-name" placeholder="êµì¬ëª…" style="flex:1;">
                    <input type="text" id="manual-unit-name" placeholder="ìœ ë‹›ëª…" style="flex:1;">
                </div>
                <textarea id="manual-text-input" class="bulk-text-area" placeholder="ë‚´ìš© ë¶™ì—¬ë„£ê¸°..."></textarea>
                <button class="btn-game" style="margin-top:0; width:auto; font-size:1rem; padding:8px 20px;" onclick="uploadManualText()">í…ìŠ¤íŠ¸ ë¶„ì„ ë° ì €ì¥</button>
            </div>

            <div style="background:#e3fcf7; padding:20px; border-radius:10px; margin-bottom:30px; border: 1px solid #b2dfdb;">
                <h4 style="color:#00796b; margin-top:0;">ğŸ“‚ CSV íŒŒì¼ ì—…ë¡œë“œ</h4>
                <div style="display:flex; gap:10px; align-items:center;">
                    <input type="file" id="csv-file" accept=".csv" style="background:white; padding:10px; border:1px solid #ccc; border-radius:5px; flex:1;">
                    <button class="btn-secondary" style="margin:0; font-size:0.9rem;" onclick="downloadTemplate()">ğŸ“¥ ì–‘ì‹ ë‹¤ìš´ë¡œë“œ</button>
                </div>
                <button class="btn-primary" style="margin-top:15px;" onclick="uploadCSV()">ì—…ë¡œë“œ</button>
            </div>

            <h4>ğŸ” ë‹¨ì–´ ê²€ìƒ‰/ìˆ˜ì •</h4>
            <div class="search-box">
                <input type="text" id="mgr-search-input" placeholder="ë‹¨ì–´ ê²€ìƒ‰..." onkeypress="if(event.key==='Enter') searchWords()">
                <button class="btn-primary" style="width:auto; margin:0;" onclick="searchWords()">ê²€ìƒ‰</button>
            </div>
            <div id="mgr-result-list" class="word-list" style="max-height:300px;"></div>
        </div>

        <!-- 4. ì¸ì‡„ ì„¼í„° -->
        <div id="tab-4" class="tab-content">
            <h3>ğŸ–¨ï¸ ìŠ¤ë§ˆíŠ¸ ì¸ì‡„ ì„¼í„°</h3>
            <div class="print-options">
                <div class="print-group" style="grid-column: 1 / -1;">
                    <label>1. êµì¬ ë° ë²”ìœ„</label>
                    <div style="display:flex; gap:10px;">
                        <select id="print-book-select" onchange="loadPrintUnits()"><option>êµì¬ ì„ íƒ</option></select>
                        <select id="print-unit-select"><option>ìœ ë‹› ì„ íƒ</option></select>
                    </div>
                </div>
                <div class="print-group">
                    <label>2. ë¬¸ì œ ìˆ˜</label><input type="number" id="print-total-count" value="20" min="5">
                </div>
                <div class="print-group">
                    <label>3. ì¶œì œ ë¹„ìœ¨ (%)</label>
                    <div class="range-wrap"><span style="width:80px;">ì˜ë¯¸</span> <input type="number" id="ratio-meaning" value="40">%</div>
                    <div class="range-wrap"><span style="width:80px;">ìŠ¤í ë§</span> <input type="number" id="ratio-spelling" value="30">%</div>
                    <div class="range-wrap"><span style="width:80px;">ì˜ˆë¬¸</span> <input type="number" id="ratio-example" value="20">%</div>
                    <div class="range-wrap"><span style="width:80px;">ìœ /ë°˜ì˜ì–´</span> <input type="number" id="ratio-synant" value="10">%</div>
                </div>
                <div class="print-group" style="grid-column: 1 / -1; display:flex; gap:10px; justify-content:center;">
                    <button class="btn-primary" onclick="generatePrint('test')">ğŸ“„ ì‹œí—˜ì§€</button>
                    <button class="btn-game" style="margin:0; background-color:#ffc107; color:#333;" onclick="generatePrint('workbook')">ğŸ“˜ ì›Œí¬ë¶</button>
                    <button class="btn-secondary" style="margin:0;" onclick="generatePrint('answer')">âœ… ë‹µì•ˆì§€</button>
                </div>
            </div>
        </div>
    </div>

    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h3>ë‹¨ì–´ ìˆ˜ì •</h3>
            <input type="hidden" id="edit-id">
            <div class="form-group"><label>English</label><input type="text" id="edit-en"></div>
            <div class="form-group"><label>Meaning</label><input type="text" id="edit-ko"></div>
            <div class="form-group"><label>Example</label><textarea id="edit-ex"></textarea></div>
            <div class="form-group"><label>Synonyms</label><input type="text" id="edit-syn"></div>
            <div class="form-group"><label>Antonyms</label><input type="text" id="edit-ant"></div>
            <div class="btn-group">
                <button class="btn-secondary" onclick="document.getElementById('edit-modal').style.display='none'">ì·¨ì†Œ</button>
                <button class="btn-primary" onclick="saveWord()">ì €ì¥</button>
            </div>
        </div>
    </div>
    
    <div id="print-area" class="print-area">
        <div class="print-header"><h1 id="print-title">Vocabulary Test</h1><div style="display:flex; justify-content:space-between; margin-top:10px; border-bottom:2px solid black; padding-bottom:10px;"><span>Class: __________</span> <span>Name: ______________</span> <span>Score: ______</span></div></div>
        <table class="print-table"><tbody id="print-tbody"></tbody></table>
    </div>

    <script src="teacher.js"></script>
</body>
</html>